<?php

/**
 * Implements @see hook_toolbar_alter.
 */
function wienimal_editor_toolbar_toolbar_alter(array &$items): void
{
    $builder = \Drupal::service('wienimal_editor_toolbar.menu_builder');

    if (!$builder->showToolbar()) {
        return;
    }

    $items['administration']['tray']['toolbar_administration']['#pre_render'] = [
        [$builder, 'preRenderTray']
    ];
}

/**
 * Implements @see hook_locale_translation_projects_alter
 */
function wienimal_editor_toolbar_locale_translation_projects_alter(array &$projects): void
{
    $path = drupal_get_path('module', 'wienimal_editor_toolbar') . '/translations/%language.po';
    $projects['wienimal_editor_toolbar']['info']['interface translation server pattern'] = $path;
}
